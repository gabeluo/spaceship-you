<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spaceship You</title>
    <link href="https://fonts.googleapis.com/css2?family=Balsamiq+Sans&display=swap" rel="stylesheet">
    <style>
    html {
        scroll-behavior: smooth;
    }

    * {
        font-family: 'Balsamiq Sans', cursive;
    }

    h1 {
        text-align: center;
        font-size: 50px;
    }
    #start{
        max-width: 960px;
        height: 1000px;
        margin: auto;
    }

    #plan{
        height: 1500px;
        max-width: 960px;
        margin: auto;
        text-align: center;
        justify-content: center;
    }

    #stats{
        height: 600px;
        max-width: 960px;
        margin: auto;
        justify-content: center;
    }

    iframe {
        display: block;
        margin: auto;
    }

    .starting {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: flex;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 10px;
            }

    button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: flex;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 10px;
            }

    .subbutton {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 4px 5px;
            text-decoration: none;
            font-size: 16px;
            margin: 0 auto;
            cursor: pointer;
            border-radius: 10px;
            position: relative;
            
      }

    .subbutton-2 {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 4px 5px;
            text-decoration: none;
            font-size: 16px;
            margin: 10px 4px;
            cursor: pointer;
            display: flex;
            border-radius: 10px;
            
      }

    .smiley{
        margin: 0px;
        position: relative;
        left: 20%;
        -ms-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
        padding-top: 5px;
    }

    .center {
        margin: 0px;
        left: 50%;
        position: relative;
        transform: translate(-50%, -50%);
        padding-top: 5px;
    }

    #piechart {
        margin: auto;
        justify-content: center;
        position: relative;
        left:35%;
    }

    .primary-buttons {
      display: flex;
      height: 100px;
      justify-content: space-between;
    }

    .secondary-buttons {
      padding-top: 5px;
      position: relative;
    left: 50%;
    }

    #intro-vid {
      margin-bottom: 30px;
    }

    .box-container {
      display: flex;
      height: 50px;
      justify-content: space-between;
      margin-top: 20px;
    }

    .username{
      display: flex;
      justify-content: center;
      top: 355px;
      left: 575px;
      height: 40px;
      right: 500px;
      size: 50px;
    }

    .tostat{
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 4px 5px;
            text-decoration: none;
            font-size: 16px;
            margin: 10px 4px;
            cursor: pointer;
            border-radius: 10px;
    }

    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
      justify-content: center;
      text-align: center;
    }

    td, th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }

    tr:nth-child(even) {
      background-color: #dddddd;
    }

    tr:nth-child(odd) {
      background-color: white;
    }

    </style>
    <script src="index.js" defer></script>
    </head>
    <body>

    <div class="main" id="start">
    <h1>Spaceship You</h1>

<!-- https://graphicriver.img.customer.envatousercontent.com/files/262056776/rocket-pre.jpg?auto=compress%2Cformat&q=80&fit=crop&crop=top&max-h=8000&max-w=590&s=5685feed30020dd37c2dea170e76939e -->

    <p>
        Are you spending hours on YouTube and can't find the will to get off? Want to have some balance in your life? We have the tool to help you get your productivity back!

        The model was based off of CPG Grey's video, and will help to reflect on your past days to make the most out of your time at home. Let's all do our best to come out of this better than when we came in!
    </p>

    <iframe width="420" height="315" id="intro-vid"
    src="https://www.youtube.com/embed/snAhsXyO3Ck">
    </iframe>
    
    <div class="username">
      <form>
        Name: <input id="name" type="text" name="name"><br>
        E-mail: <input id="email" type="text" name="email"><br>
        <a href="#plan" class="starting">Let's go!</a>
      </form>
    </div>

      <!-- <script>
        function results() {
          var name = document.getElementById('name').value;
          var email = document.getElementById('name').value;
          document.write("<h1>Hello</h1>" + name);
        }
      </script> -->
      <!--
        <form>
        <input type="text" placeholder="Username..." size="50">
        </form>
      -->
    </div>

<div class="main" id="plan">
  <h1>Planning</h1>
      <button class="center" onclick="authenticate().then(loadClient).then(load).then(bgcolour)">Connect to Google Calendar</button>
  
  <form class="box-container">

  <!-- <script>
    function checkTime(){
      let start = document.getElementById("myList1").value;
      start = parseInt(start, 10);
      
      foreach (ListItem item in dropdownlist.Items){
        if ( [item should be disabled condition] ){
          item.Attributes.Add( "disabled", "disabled" );
        }
      }
    }
  </script> -->

  <label>Start time:<label>
  <select id = "myList1" name = "starttime">
    <option value = "0">12:00 am</option>
    <option value = "1">1:00 am</option>
    <option value = "2">2:00 am</option>
    <option value = "3">3:00 am</option>
    <option value = "4">4:00 am</option>
    <option value = "5">5:00 am</option>
    <option value = "6">6:00 am</option>
    <option value = "7">7:00 am</option>
    <option value = "8">8:00 am</option>
    <option value = "9">9:00 am</option>
    <option value = "10">10:00 am</option>
    <option value = "11">11:00 am</option>
    <option value = "12">12:00 pm</option>
    <option value = "13">1:00 pm</option>
    <option value = "14">2:00 pm</option>
    <option value = "15">3:00 pm</option>
    <option value = "16">4:00 pm</option>
    <option value = "17">5:00 pm</option>
    <option value = "18">6:00 pm</option>
    <option value = "19">7:00 pm</option>
    <option value = "20">8:00 pm</option>
    <option value = "21">9:00 pm</option>
    <option value = "22">10:00 pm</option>
    <option value = "23">11:00 pm</option>
  </select>

  <label>End time:<label>
  <select id = "myList2" name = "endtime">
    <option id = "0" value = "0">12:00 am</option>
    <option id = "1" value = "1">1:00 am</option>
    <option id = "2" value = "2">2:00 am</option>
    <option id = "3" value = "3">3:00 am</option>
    <option id = "4" value = "4">4:00 am</option>
    <option id = "5" value = "5">5:00 am</option>
    <option id = "6" value = "6">6:00 am</option>
    <option id = "7" value = "7">7:00 am</option>
    <option id = "8" value = "8">8:00 am</option>
    <option id = "9" value = "9">9:00 am</option>
    <option id = "10" value = "10">10:00 am</option>
    <option id = "11" value = "11">11:00 am</option>
    <option id = "12" value = "12">12:00 pm</option>
    <option id = "13" value = "13">1:00 pm</option>
    <option id = "14" value = "14">2:00 pm</option>
    <option id = "15" value = "15">3:00 pm</option>
    <option id = "16" value = "16">4:00 pm</option>
    <option id = "17" value = "17">5:00 pm</option>
    <option id = "18" value = "18">6:00 pm</option>
    <option id = "19" value = "19">7:00 pm</option>
    <option id = "20" value = "20">8:00 pm</option>
    <option id = "21" value = "21">9:00 pm</option>
    <option id = "22" value = "22">10:00 pm</option>
    <option id = "23" value = "23">11:00 pm</option>
  </select>

  <label>Activity:<label>
  <select id = "myList3" name = "activity">
    <option value = "Creation">Creation</option>
    <option value = "Exercise">Exercise</option>
    <option value = "Leisure">Leisure</option>
    <option value = "Sleep">Sleep</option>
  </select>

    <button type="button" onclick="addEvent()">Submit</button>
</form>

<table id="timetable">
  <tr>
    <th>Time</th>
    <th>Activty</th>
    <th>Rating</th>
  </tr>
  <tr>
    <td>12:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>1:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>2:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>3:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>4:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>5:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>6:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>7:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>8:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>9:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>10:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>11:00 am</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>12:00 pm</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>1:00 pm</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>2:00 pm</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>3:00 pm</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>4:00 pm</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>5:00 pm</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>6:00 pm</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>7:00 pm</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>8:00 pm</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>9:00 pm</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>10:00 pm</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>11:00 pm</td>
    <td></td>
    <td></td>
  </tr>
</table>

<form onsubmit="return getMood();">
  <label class="smiley"> 
    <input id="mood5" type="radio" name="rating" value=1><img src="images/smiley-1.png" alt="smiley-5" style="border-radius:50%">
    <input id="mood4" type="radio" name="rating" value=2><img src="images/smiley-2.png" alt="smiley-4" style="border-radius:50%">
    <input id="mood3" type="radio" name="rating" value=3><img src="images/smiley-3.png" alt="smiley-3" style="border-radius:50%">
    <input id="mood2" type="radio" name="rating" value=4><img src="images/smiley-4.png" alt="smiley-2" style="border-radius:50%">
    <input id="mood1" type="radio" name="rating" value=5><img src="images/smiley-5.png" alt="smiley-1" style="border-radius:50%">
    <!-- <input type="submit" id="submit"> -->
  </label>
</form>

<button type="button" onclick="return getMood();">Submit</button>

<script>
  function getMood() {
    if (document.getElementById("mood1").checked) {
      var val = document.getElementById("mood1").value;
      addData("red", 25);
    }
    else if (document.getElementById("mood2").checked) {
      var val = document.getElementById("mood2").value;
      addData("yellow", 25);
    }
    else if (document.getElementById("mood3").checked) {
      var val = document.getElementById("mood3").value;
      addData("#cbc800", 25);
    }
    else if (document.getElementById("mood4").checked) {
      var val = document.getElementById("mood4").value;
      addData("#7ec800", 25);
    }
    else {
      var val = document.getElementById("mood5").value;
      addData("green", 25);
    }
    //alert(val)
  }
</script>

<script src="https://apis.google.com/js/api.js"></script>
<script>
  /**
   * Sample JavaScript code for calendar.events.insert
   * See instructions for running APIs Explorer code samples locally:
   * https://developers.google.com/explorer-help/guides/code_samples#javascript
   */

  function authenticate() {
    return gapi.auth2.getAuthInstance()
        .signIn({scope: "https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/calendar.events"})
        .then(function() { console.log("Sign-in successful"); },
              function(err) { console.error("Error signing in", err); });
  }
  function loadClient() {
    gapi.client.setApiKey("AIzaSyB1YPoSqZsRTeGVK7okACFS38VMF4gW3wA");
    return gapi.client.load("https://content.googleapis.com/discovery/v1/apis/calendar/v3/rest")
        .then(function() { console.log("GAPI client loaded for API"); },
              function(err) { console.error("Error loading GAPI client for API", err); });
  }
  // Make sure the client is loaded and sign-in is complete before calling this method.

    function addEvent() {
        let today = new Date();
        let year = today.getFullYear();
        let month = today.getMonth();
        let day = today.getDate();
        let start = document.getElementById("myList1").value;
        let end = document.getElementById("myList2").value;
        let title = document.getElementById("myList3").value;
        let color;
        if (title == "Creation")
            color = 1;
        else if (title == "Sleep")
            color = 3;
        else if (title == "Exercise")
            color = 6;
        else if (title == "Leisure")
            color = 2;

        start = parseInt(start, 10);
        end = parseInt(end, 10);
        let rn = start + 1;
        let cn = 1;

        var myParent = document.body;

        var selectList = document.createElement("select");
        selectList.id = "mySelect";

        for (var i = 1; i <= 5; i++) {
          var option = document.createElement("option");
          option.value = i;
          option.text = i;
          selectList.appendChild(option);
        }

        for (let i = 0; i <= (end - start); i++){
        var x=document.getElementById('timetable').rows[parseInt(rn + i,10)].cells;
        x[parseInt(cn,10)].innerHTML = title;
        if (i == (end - start)){
            var x=document.getElementById('timetable').rows[parseInt(rn + i,10)].cells;
            x[parseInt(2,10)].appendChild(selectList);
        }
        }

        return gapi.client.calendar.events.insert({
            "calendarId": "primary",
            "summary": title,
            "colorId": color,
            "start": {
                "dateTime": new Date(year, month, day, start, 0, 0, 0),
                "timeZone": "America/New_York"
            },
            "end": {
                "dateTime": new Date(year, month, day, end, 0, 0, 0),
                "timeZone": "America/New_York"
            },
        }).then(function(response) {
                    // Handle the results here (response.result has the parsed body).
                    console.log("Response", response);
                },
                function(err) { console.error("Execute error", err); });
    }

    function disable()
    {
        let i = document.getElementById("myList1").value;
        i = parseInt(i, 10);
        for (x=0; x<i;x++)
        {
            document.getElementById(x).disabled=true;
        }
        let t = setTimeout(disable, 500);
    }

    disable();

    function load() {
        let today = new Date();
        let year = today.getFullYear();
        let month = today.getMonth();
        let day = today.getDate();
        gapi.client.calendar.events.list({
        'calendarId': 'primary',
        'timeMin': (new Date()).toISOString(),
        'timeMax': (new Date(year, month, day, 23, 59, 59, 99)).toISOString(),
        'showDeleted': false,
        'singleEvents': true,
        'orderBy': 'startTime',
        }).then(function(response) {
        let events = response.result.items;
        if (events.length > 0) {
            for (i = 0; i < events.length; i++) {
            let event = events[i];
            let title = event.summary;
            let start = new Date(event.start.dateTime).getHours();
            let end = new Date(event.end.dateTime).getHours();
            
            let rn = start + 1;
            let cn = 1;

            var myParent = document.body;

            var selectList = document.createElement("select");
            selectList.id = "mySelect";

            for (var i = 1; i <= 5; i++) {
            var option = document.createElement("option");
            option.value = i;
            option.text = i;
            selectList.appendChild(option);
            }

            for (let i = 0; i <= (end - start); i++){
            var x=document.getElementById('timetable').rows[parseInt(rn + i,10)].cells;
            x[parseInt(cn,10)].innerHTML = title;
            if (i == (end - start)){
                var x=document.getElementById('timetable').rows[parseInt(rn + i,10)].cells;
                x[parseInt(2,10)].appendChild(selectList);
            }
            }
            }
        }
        });
    }

function bgcolour(){
    if (gapi.client){
    gapi.client.calendar.events.list({
        'calendarId': 'primary',
        'timeMin': (new Date()).toISOString(),
        'showDeleted': false,
        'singleEvents': true,
        'orderBy': 'startTime',
        'maxResults': 1
    }).then(function(response) {
        let events = response.result.items;
        let event = events[0];
        let title = event.summary;
        if (new Date(event.start.dateTime).getTime()<=new Date().getTime()){
            if (title == "Creation")
                document.body.style.backgroundColor = "blue";
            else if (title == "Sleep")
                document.body.style.backgroundColor = "purple";
            else if (title == "Exercise")
                document.body.style.backgroundColor = "orange";
            else if (title == "Leisure")
                document.body.style.backgroundColor = "green";
        }
        else
            document.body.style.backgroundColor = "white";
    });
    let t = setTimeout(bgcolour, 500);
    }
}

gapi.load("client:auth2", function() {
    gapi.auth2.init({client_id: "573994326945-8r6a9l85kg4kskpe2mcc5qrqvohfn047.apps.googleusercontent.com"});
  });

 bgcolour();
</script>

</div>
    <div class="main" id="stats">
        <h1>Statistics</h1>
        <canvas id="piechart" wid"500" height="500"></canvas>
        
    </div>
</body>

<script type="text/javascript">
    
</script>

</html>